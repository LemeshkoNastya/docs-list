{"remainingRequest":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\src\\views\\Docs.vue?vue&type=style&index=0&id=b590ac18&prod&lang=scss&","dependencies":[{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\src\\views\\Docs.vue","mtime":1663286057265},{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\css-loader\\dist\\cjs.js","mtime":1663283941225},{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1663283944083},{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\postcss-loader\\src\\index.js","mtime":1663283942046},{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1663284105133},{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663283940278},{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\vue-loader\\lib\\index.js","mtime":1663283943575}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkBpbXBvcnQgdXJsKCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUZpcmErU2FuczppdGFsLHdnaHRAMCw0MDA7MCw1MDA7MSw0MDAmZGlzcGxheT1zd2FwIik7CgouZG9jcyB7CiAgbWFyZ2luOiAzMHB4OwogIGZvbnQtZmFtaWx5OiAiRmlyYSBTYW5zIiwgc2Fucy1zZXJpZjsKCiAgJl9kcmFnZ2luZyB7CiAgICBvcGFjaXR5OiAwLjI7CiAgfQoKICAmX190aXRsZSB7CiAgICBtYXJnaW4tdG9wOiAzcHg7CiAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgZm9udC13ZWlnaHQ6IDUwMDsKICAgIGZvbnQtc2l6ZTogMjJweDsKICAgIGNvbG9yOiBibGFjazsKICB9CgogICZfX2VsZW1lbnRzIHsKICAgIG1hcmdpbi10b3A6IDE0cHg7CiAgfQoKICAmX19jYXRlZ29yaWVzIHsKICAgIG1hcmdpbi10b3A6IDE4cHg7CiAgICBib3JkZXItcmFkaXVzOiAwOwoKICAgICYgPiAqOmZpcnN0LWNoaWxkIHsKICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMDsKICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDA7CiAgICAgIHdpZHRoOiAxMDAlOwogICAgfQogIH0KCiAgJl9faGVhZGVyIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgcGFkZGluZzogMDsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZmU0ZWY7CiAgfQoKICAmX19jYXRlZ29yeSB7CiAgICB3aWR0aDogMTAwJTsKICAgIG1pbi13aWR0aDogMTAwJTsKCiAgICAmOjpiZWZvcmUgewogICAgICBib3JkZXItcmFkaXVzOiAwOwogICAgICBib3gtc2hhZG93OiBub25lOwogICAgfQoKICAgICY6bm90KDpmaXJzdC1jaGlsZCk6OmFmdGVyIHsKICAgICAgYm9yZGVyLXRvcDogbm9uZTsKICAgIH0KCiAgICAmOm5vdCg6Zmlyc3QtY2hpbGQpIHsKICAgICAgLmRvY3NfX2hlYWRlciB7CiAgICAgICAgYm9yZGVyLXRvcDogMDsKCiAgICAgICAgJl9uZXh0IHsKICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZmU0ZWY7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgLnYtZXhwYW5zaW9uLXBhbmVsLWhlYWRlcl9faWNvbiB7CiAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICB9CgogICAgLnYtZXhwYW5zaW9uLXBhbmVsLWNvbnRlbnRfX3dyYXAgewogICAgICBwYWRkaW5nOiAwIDAgMCAxNnB4OwoKICAgICAgLmVsZW1lbnQgewogICAgICAgIGJvcmRlci10b3A6IDA7CgogICAgICAgICY6bGFzdC1jaGlsZCB7CiAgICAgICAgICBib3JkZXItYm90dG9tOiAwOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgICYudi1leHBhbnNpb24tcGFuZWwtLWFjdGl2ZSA+IC52LWV4cGFuc2lvbi1wYW5lbC1oZWFkZXIgewogICAgICBtaW4taGVpZ2h0OiBhdXRvOwogICAgfQoKICAgICYudi1leHBhbnNpb24tcGFuZWwtLWFjdGl2ZSArIC52LWV4cGFuc2lvbi1wYW5lbCB7CiAgICAgIG1hcmdpbi10b3A6IDA7CiAgICB9CgogICAgLmRvY3NfX2VsZW1lbnRzIHsKICAgICAgbWFyZ2luLXRvcDogMDsKICAgIH0KICB9CgogICZfX2NvbnRlbnQgewogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICB3aWR0aDogMTAwJTsKICB9CgogICZfX2luZm8gewogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgfQoKICAmX19tYXJrZXJzIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBtYXJnaW4tbGVmdDogMTZweDsKICB9CgogICZfX21hcmtlciB7CiAgICB3aWR0aDogOHB4OwogICAgaGVpZ2h0OiA4cHg7CiAgICBib3JkZXItcmFkaXVzOiA1MCU7CgogICAgJjpub3QoOmZpcnN0LWNoaWxkKSB7CiAgICAgIG1hcmdpbi1sZWZ0OiA2cHg7CiAgICB9CgogICAgJl9vdXRsaW5lIHsKICAgICAgYm9yZGVyOiAxcHggc29saWQgIzAwMDAwMDsKICAgICAgYm94LXNoYWRvdzogMHB4IDRweCA0cHggcmdiYSgwLCAwLCAwLCAwLjI1KTsKICAgIH0KICB9CgogICZfX3R5cGUsCiAgJl9fc3VidGl0bGUgewogICAgbWFyZ2luLWxlZnQ6IDE1cHg7CiAgICBmb250LXdlaWdodDogNDAwOwogICAgZm9udC1zaXplOiAxMXB4OwogIH0KCiAgJl9fdHlwZSB7CiAgICBjb2xvcjogI2ZmMjM4ZDsKICB9CgogICZfX3N1YnRpdGxlIHsKICAgIGNvbG9yOiAjOGU5Y2JiOwogIH0KCiAgJl9fYnV0dG9ucyB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIHdpZHRoOiA3NXB4OwogICAgbWF4LXdpZHRoOiA3NXB4OwogICAgbWluLXdpZHRoOiA3NXB4OwogIH0KCiAgJl9fZHJvcCB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IC0xMDB2aDsKICAgIHotaW5kZXg6IDE7CiAgICB3aWR0aDogY2FsYygxMDAlIC0gNjBweCk7CiAgICBiYWNrZ3JvdW5kOiB3aGl0ZTsKICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZmU0ZWY7CiAgICBib3gtc2hhZG93OiAwcHggM3B4IDE2cHggcmdiYSgwLCAxMDIsIDI1NSwgMC43KTsKCiAgICAuZWxlbWVudCB7CiAgICAgIGJvcmRlcjogbm9uZTsKICAgIH0KICB9CgogICZfX2Vycm9yIHsKICAgIGNvbG9yOiAjOGU5Y2JiOwogIH0KfQoKLmxpc3QtZW50ZXItYWN0aXZlLAoubGlzdC1sZWF2ZS1hY3RpdmUgewogIHRyYW5zaXRpb246IGFsbCAwLjVzIGVhc2U7Cn0KLmxpc3QtZW50ZXItZnJvbSwKLmxpc3QtbGVhdmUtdG8gewogIG9wYWNpdHk6IDA7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDMwcHgpOwp9Cg=="},{"version":3,"sources":["Docs.vue"],"names":[],"mappings":";AAqRA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Docs.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"docs\">\n    <h2 class=\"docs__title\">Документы</h2>\n    <BaseSearch :search.sync=\"docsSearch\" />\n\n    <v-expansion-panels ref=\"listCategories\" accordion class=\"docs__categories\">\n      <TransitionGroup name=\"list\">\n        <v-expansion-panel\n          v-for=\"(category, indexCategory) in docsCategories\"\n          :key=\"category.id\"\n          @click=\"indexCategoryActive = indexCategory\"\n          class=\"docs__category\"\n        >\n          <v-expansion-panel-header\n            v-slot=\"{ open }\"\n            class=\"docs__header\"\n            :class=\"{\n              docs__header_next: checkCategory(indexCategory),\n            }\"\n          >\n            <DocCategory\n              :ref=\"`category-${category.id}`\"\n              :category=\"category\"\n              :open=\"open\"\n              @move=\"dragMoveCategory($event)\"\n              @end=\"dragEndCategory($event)\"\n              @start=\"currentDrapCategory = category\"\n            />\n          </v-expansion-panel-header>\n          <v-expansion-panel-content>\n            <div class=\"docs__elements\">\n              <DocElement\n                v-for=\"element in category.elements\"\n                :key=\"element.id\"\n                :ref=\"`element-${element.id}`\"\n                :element=\"element\"\n                @move=\"dragMoveElement($event)\"\n                @end=\"dragEndElement($event)\"\n                @start=\"currentDrapElement = element\"\n              />\n            </div>\n          </v-expansion-panel-content>\n        </v-expansion-panel>\n      </TransitionGroup>\n    </v-expansion-panels>\n\n    <div ref=\"listElements\" class=\"docs__elements\">\n      <TransitionGroup name=\"list\">\n        <DocElement\n          v-for=\"element in docsElements\"\n          :key=\"element.id\"\n          :ref=\"`element-${element.id}`\"\n          :element=\"element\"\n          @move=\"dragMoveElement($event)\"\n          @end=\"dragEndElement($event)\"\n          @start=\"currentDrapElement = element\"\n        />\n      </TransitionGroup>\n    </div>\n\n    <span\n      v-if=\"docsCategories.length === 0 && docsElements.length === 0\"\n      class=\"docs__error\"\n    >\n      Ничего не найдено. Попробуйте изменить параметры поиска.\n    </span>\n    <div ref=\"dragElement\" class=\"docs__drop\">\n      <DocElement :element=\"currentDrapElement\" :drop=\"true\" />\n    </div>\n    <div ref=\"dragCategory\" class=\"docs__drop\">\n      <DocCategory :category=\"currentDrapCategory\" :drop=\"true\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport BaseSearch from \"@/components/BaseSearch.vue\";\nimport DocCategory from \"@/components/DocCategory.vue\";\nimport DocElement from \"@/components/DocElement.vue\";\nimport { mapGetters, mapMutations, mapActions } from \"vuex\";\n\nexport default {\n  components: { BaseSearch, DocCategory, DocElement },\n  data() {\n    return {\n      docsSearch: null,\n      indexCategoryActive: null,\n      currentDrapCategory: null,\n      currentDrapElement: null,\n      payloadCategories: null,\n      payloadElements: null,\n    };\n  },\n  watch: {\n    docsSearch() {\n      this.changeSearch(this.docsSearch);\n      this.changefilterCategories();\n      this.changeFilterElements();\n    },\n  },\n  computed: {\n    ...mapGetters([\"docsCategories\", \"docsElements\"]),\n  },\n  methods: {\n    ...mapMutations([\n      \"changeSearch\",\n      \"changefilterCategories\",\n      \"changeFilterElements\",\n      \"insertCategory\",\n    ]),\n    ...mapActions([\"insertElements\"]),\n    checkCategory(index) {\n      return (\n        this.indexCategoryActive !== null &&\n        index === this.indexCategoryActive + 1\n      );\n    },\n    dragMoveCategory(e) {\n      e = e || window.event;\n      e.preventDefault();\n\n      const container = this.$refs.listCategories.$el.getBoundingClientRect();\n\n      this.$refs.dragCategory.hidden = true;\n      const elemBelow = document.elementFromPoint(e.clientX, e.clientY);\n      this.$refs.dragCategory.hidden = false;\n\n      const activeElement =\n        this.$refs[`category-${this.currentDrapCategory.id}`];\n\n      this.deleteClassInsert();\n      this.payloadCategories = null;\n\n      if (\n        elemBelow &&\n        activeElement[0].$el !== elemBelow &&\n        elemBelow.classList.contains(\"category\")\n      ) {\n        elemBelow.classList.add(\"category_insert\");\n        let idCurrentElement;\n\n        this.docsCategories.forEach((elem) => {\n          if (elemBelow === this.$refs[`category-${elem.id}`][0].$el) {\n            idCurrentElement = elem.id;\n          }\n        });\n\n        this.payloadCategories = {\n          active: this.currentDrapCategory.id,\n          current: idCurrentElement,\n        };\n      }\n\n      if (\n        e.clientY >= container.top &&\n        e.clientY <= container.top + container.height\n      )\n        this.$refs.dragCategory.style.top = e.clientY + \"px\";\n      this.$refs.dragCategory.style.left = \"30px\";\n    },\n    dragEndCategory(e) {\n      e = e || window.event;\n      e.preventDefault();\n\n      if (this.payloadCategories !== null)\n        this.insertCategory(this.payloadCategories);\n\n      this.$refs.dragCategory.style.top = \"-100vh\";\n      this.deleteClassInsert();\n    },\n    dragMoveElement(e) {\n      e = e || window.event;\n      e.preventDefault();\n\n      const containerCategories =\n        this.$refs.listCategories.$el.getBoundingClientRect();\n      const containerElements = this.$refs.listElements.getBoundingClientRect();\n\n      this.$refs.dragElement.hidden = true;\n      const elemBelow = document.elementFromPoint(e.clientX, e.clientY);\n      this.$refs.dragElement.hidden = false;\n\n      const activeElement = this.$refs[`element-${this.currentDrapElement.id}`];\n\n      this.deleteClassInsertForElement();\n      this.payloadElements = null;\n\n      if (\n        elemBelow &&\n        activeElement[0].$el &&\n        activeElement[0].$el !== elemBelow &&\n        elemBelow.classList.contains(\"element\")\n      ) {\n        elemBelow.classList.add(\"element_insert\");\n        let idCurrentElement = null;\n\n        this.docsElements.forEach((elem) => {\n          if (elemBelow === this.$refs[`element-${elem.id}`][0].$el) {\n            idCurrentElement = elem.id;\n          }\n        });\n\n        if (idCurrentElement === null) {\n          this.docsCategories.forEach((category) => {\n            if (category.elements.length > 0) {\n              category.elements.forEach((elem) => {\n                if (\n                  this.$refs[`element-${elem.id}`] &&\n                  elemBelow === this.$refs[`element-${elem.id}`][0].$el\n                ) {\n                  idCurrentElement = elem.id;\n                }\n              });\n            }\n          });\n        }\n\n        this.payloadElements = {\n          active: this.currentDrapElement.id,\n          current: idCurrentElement,\n        };\n      }\n\n      if (\n        e.clientY >= containerCategories.top &&\n        e.clientY <= containerElements.top + containerElements.height\n      )\n        this.$refs.dragElement.style.top = e.clientY + \"px\";\n      this.$refs.dragElement.style.left = \"30px\";\n    },\n    dragEndElement(e) {\n      e = e || window.event;\n      e.preventDefault();\n\n      if (this.payloadElements !== null)\n        this.insertElements(this.payloadElements);\n\n      this.$refs.dragElement.style.top = \"-100vh\";\n      this.deleteClassInsertForElement();\n    },\n    deleteClassInsert() {\n      const categories =\n        this.$refs.listCategories.$el.querySelectorAll(\".category\");\n      if (categories) {\n        categories.forEach((category) => {\n          if (category.classList.contains(\"category_insert\"))\n            category.classList.remove(\"category_insert\");\n        });\n      }\n    },\n    deleteClassInsertForElement() {\n      const elementsCategories =\n        this.$refs.listCategories.$el.querySelectorAll(\".element\");\n      const elements = this.$refs.listElements.querySelectorAll(\".element\");\n\n      if (elementsCategories) {\n        elementsCategories.forEach((element) => {\n          if (element.classList.contains(\"element_insert\"))\n            element.classList.remove(\"element_insert\");\n        });\n      }\n      if (elements) {\n        elements.forEach((element) => {\n          if (element.classList.contains(\"element_insert\"))\n            element.classList.remove(\"element_insert\");\n        });\n      }\n    },\n  },\n  mounted() {\n    this.changefilterCategories();\n    this.changeFilterElements();\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import url(\"https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,400;0,500;1,400&display=swap\");\n\n.docs {\n  margin: 30px;\n  font-family: \"Fira Sans\", sans-serif;\n\n  &_dragging {\n    opacity: 0.2;\n  }\n\n  &__title {\n    margin-top: 3px;\n    margin-bottom: 15px;\n    font-weight: 500;\n    font-size: 22px;\n    color: black;\n  }\n\n  &__elements {\n    margin-top: 14px;\n  }\n\n  &__categories {\n    margin-top: 18px;\n    border-radius: 0;\n\n    & > *:first-child {\n      border-top-left-radius: 0;\n      border-top-right-radius: 0;\n      width: 100%;\n    }\n  }\n\n  &__header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0;\n    border: 1px solid #dfe4ef;\n  }\n\n  &__category {\n    width: 100%;\n    min-width: 100%;\n\n    &::before {\n      border-radius: 0;\n      box-shadow: none;\n    }\n\n    &:not(:first-child)::after {\n      border-top: none;\n    }\n\n    &:not(:first-child) {\n      .docs__header {\n        border-top: 0;\n\n        &_next {\n          border: 1px solid #dfe4ef;\n        }\n      }\n    }\n\n    .v-expansion-panel-header__icon {\n      display: none;\n    }\n\n    .v-expansion-panel-content__wrap {\n      padding: 0 0 0 16px;\n\n      .element {\n        border-top: 0;\n\n        &:last-child {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    &.v-expansion-panel--active > .v-expansion-panel-header {\n      min-height: auto;\n    }\n\n    &.v-expansion-panel--active + .v-expansion-panel {\n      margin-top: 0;\n    }\n\n    .docs__elements {\n      margin-top: 0;\n    }\n  }\n\n  &__content {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n  }\n\n  &__info {\n    display: flex;\n    align-items: center;\n  }\n\n  &__markers {\n    display: flex;\n    margin-left: 16px;\n  }\n\n  &__marker {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n\n    &:not(:first-child) {\n      margin-left: 6px;\n    }\n\n    &_outline {\n      border: 1px solid #000000;\n      box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n    }\n  }\n\n  &__type,\n  &__subtitle {\n    margin-left: 15px;\n    font-weight: 400;\n    font-size: 11px;\n  }\n\n  &__type {\n    color: #ff238d;\n  }\n\n  &__subtitle {\n    color: #8e9cbb;\n  }\n\n  &__buttons {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 75px;\n    max-width: 75px;\n    min-width: 75px;\n  }\n\n  &__drop {\n    position: absolute;\n    top: -100vh;\n    z-index: 1;\n    width: calc(100% - 60px);\n    background: white;\n    border: 1px solid #dfe4ef;\n    box-shadow: 0px 3px 16px rgba(0, 102, 255, 0.7);\n\n    .element {\n      border: none;\n    }\n  }\n\n  &__error {\n    color: #8e9cbb;\n  }\n}\n\n.list-enter-active,\n.list-leave-active {\n  transition: all 0.5s ease;\n}\n.list-enter-from,\n.list-leave-to {\n  opacity: 0;\n  transform: translateX(30px);\n}\n</style>\n"]}]}