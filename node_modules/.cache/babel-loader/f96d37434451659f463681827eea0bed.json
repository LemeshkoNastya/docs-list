{"remainingRequest":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\src\\views\\Docs.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\src\\views\\Docs.vue","mtime":1663286057265},{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\babel.config.js","mtime":1663284096965},{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663283940278},{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1663283940277},{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\babel-loader\\lib\\index.js","mtime":1663283942052},{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663283940278},{"path":"C:\\Users\\LAF\\Documents\\Документы\\Works\\Repositories\\docs-list\\node_modules\\vue-loader\\lib\\index.js","mtime":1663283943575}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEJhc2VTZWFyY2ggZnJvbSAiQC9jb21wb25lbnRzL0Jhc2VTZWFyY2gudnVlIjsKaW1wb3J0IERvY0NhdGVnb3J5IGZyb20gIkAvY29tcG9uZW50cy9Eb2NDYXRlZ29yeS52dWUiOwppbXBvcnQgRG9jRWxlbWVudCBmcm9tICJAL2NvbXBvbmVudHMvRG9jRWxlbWVudC52dWUiOwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBNdXRhdGlvbnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEJhc2VTZWFyY2gsCiAgICBEb2NDYXRlZ29yeSwKICAgIERvY0VsZW1lbnQKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZG9jc1NlYXJjaDogbnVsbCwKICAgICAgaW5kZXhDYXRlZ29yeUFjdGl2ZTogbnVsbCwKICAgICAgY3VycmVudERyYXBDYXRlZ29yeTogbnVsbCwKICAgICAgY3VycmVudERyYXBFbGVtZW50OiBudWxsLAogICAgICBwYXlsb2FkQ2F0ZWdvcmllczogbnVsbCwKICAgICAgcGF5bG9hZEVsZW1lbnRzOiBudWxsCiAgICB9OwogIH0sCgogIHdhdGNoOiB7CiAgICBkb2NzU2VhcmNoKCkgewogICAgICB0aGlzLmNoYW5nZVNlYXJjaCh0aGlzLmRvY3NTZWFyY2gpOwogICAgICB0aGlzLmNoYW5nZWZpbHRlckNhdGVnb3JpZXMoKTsKICAgICAgdGhpcy5jaGFuZ2VGaWx0ZXJFbGVtZW50cygpOwogICAgfQoKICB9LAogIGNvbXB1dGVkOiB7IC4uLm1hcEdldHRlcnMoWyJkb2NzQ2F0ZWdvcmllcyIsICJkb2NzRWxlbWVudHMiXSkKICB9LAogIG1ldGhvZHM6IHsgLi4ubWFwTXV0YXRpb25zKFsiY2hhbmdlU2VhcmNoIiwgImNoYW5nZWZpbHRlckNhdGVnb3JpZXMiLCAiY2hhbmdlRmlsdGVyRWxlbWVudHMiLCAiaW5zZXJ0Q2F0ZWdvcnkiXSksCiAgICAuLi5tYXBBY3Rpb25zKFsiaW5zZXJ0RWxlbWVudHMiXSksCgogICAgY2hlY2tDYXRlZ29yeShpbmRleCkgewogICAgICByZXR1cm4gdGhpcy5pbmRleENhdGVnb3J5QWN0aXZlICE9PSBudWxsICYmIGluZGV4ID09PSB0aGlzLmluZGV4Q2F0ZWdvcnlBY3RpdmUgKyAxOwogICAgfSwKCiAgICBkcmFnTW92ZUNhdGVnb3J5KGUpIHsKICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50OwogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuJHJlZnMubGlzdENhdGVnb3JpZXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB0aGlzLiRyZWZzLmRyYWdDYXRlZ29yeS5oaWRkZW4gPSB0cnVlOwogICAgICBjb25zdCBlbGVtQmVsb3cgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGUuY2xpZW50WCwgZS5jbGllbnRZKTsKICAgICAgdGhpcy4kcmVmcy5kcmFnQ2F0ZWdvcnkuaGlkZGVuID0gZmFsc2U7CiAgICAgIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSB0aGlzLiRyZWZzW2BjYXRlZ29yeS0ke3RoaXMuY3VycmVudERyYXBDYXRlZ29yeS5pZH1gXTsKICAgICAgdGhpcy5kZWxldGVDbGFzc0luc2VydCgpOwogICAgICB0aGlzLnBheWxvYWRDYXRlZ29yaWVzID0gbnVsbDsKCiAgICAgIGlmIChlbGVtQmVsb3cgJiYgYWN0aXZlRWxlbWVudFswXS4kZWwgIT09IGVsZW1CZWxvdyAmJiBlbGVtQmVsb3cuY2xhc3NMaXN0LmNvbnRhaW5zKCJjYXRlZ29yeSIpKSB7CiAgICAgICAgZWxlbUJlbG93LmNsYXNzTGlzdC5hZGQoImNhdGVnb3J5X2luc2VydCIpOwogICAgICAgIGxldCBpZEN1cnJlbnRFbGVtZW50OwogICAgICAgIHRoaXMuZG9jc0NhdGVnb3JpZXMuZm9yRWFjaChlbGVtID0+IHsKICAgICAgICAgIGlmIChlbGVtQmVsb3cgPT09IHRoaXMuJHJlZnNbYGNhdGVnb3J5LSR7ZWxlbS5pZH1gXVswXS4kZWwpIHsKICAgICAgICAgICAgaWRDdXJyZW50RWxlbWVudCA9IGVsZW0uaWQ7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5wYXlsb2FkQ2F0ZWdvcmllcyA9IHsKICAgICAgICAgIGFjdGl2ZTogdGhpcy5jdXJyZW50RHJhcENhdGVnb3J5LmlkLAogICAgICAgICAgY3VycmVudDogaWRDdXJyZW50RWxlbWVudAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGlmIChlLmNsaWVudFkgPj0gY29udGFpbmVyLnRvcCAmJiBlLmNsaWVudFkgPD0gY29udGFpbmVyLnRvcCArIGNvbnRhaW5lci5oZWlnaHQpIHRoaXMuJHJlZnMuZHJhZ0NhdGVnb3J5LnN0eWxlLnRvcCA9IGUuY2xpZW50WSArICJweCI7CiAgICAgIHRoaXMuJHJlZnMuZHJhZ0NhdGVnb3J5LnN0eWxlLmxlZnQgPSAiMzBweCI7CiAgICB9LAoKICAgIGRyYWdFbmRDYXRlZ29yeShlKSB7CiAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAodGhpcy5wYXlsb2FkQ2F0ZWdvcmllcyAhPT0gbnVsbCkgdGhpcy5pbnNlcnRDYXRlZ29yeSh0aGlzLnBheWxvYWRDYXRlZ29yaWVzKTsKICAgICAgdGhpcy4kcmVmcy5kcmFnQ2F0ZWdvcnkuc3R5bGUudG9wID0gIi0xMDB2aCI7CiAgICAgIHRoaXMuZGVsZXRlQ2xhc3NJbnNlcnQoKTsKICAgIH0sCgogICAgZHJhZ01vdmVFbGVtZW50KGUpIHsKICAgICAgZSA9IGUgfHwgd2luZG93LmV2ZW50OwogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGNvbnN0IGNvbnRhaW5lckNhdGVnb3JpZXMgPSB0aGlzLiRyZWZzLmxpc3RDYXRlZ29yaWVzLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgY29uc3QgY29udGFpbmVyRWxlbWVudHMgPSB0aGlzLiRyZWZzLmxpc3RFbGVtZW50cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgdGhpcy4kcmVmcy5kcmFnRWxlbWVudC5oaWRkZW4gPSB0cnVlOwogICAgICBjb25zdCBlbGVtQmVsb3cgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGUuY2xpZW50WCwgZS5jbGllbnRZKTsKICAgICAgdGhpcy4kcmVmcy5kcmFnRWxlbWVudC5oaWRkZW4gPSBmYWxzZTsKICAgICAgY29uc3QgYWN0aXZlRWxlbWVudCA9IHRoaXMuJHJlZnNbYGVsZW1lbnQtJHt0aGlzLmN1cnJlbnREcmFwRWxlbWVudC5pZH1gXTsKICAgICAgdGhpcy5kZWxldGVDbGFzc0luc2VydEZvckVsZW1lbnQoKTsKICAgICAgdGhpcy5wYXlsb2FkRWxlbWVudHMgPSBudWxsOwoKICAgICAgaWYgKGVsZW1CZWxvdyAmJiBhY3RpdmVFbGVtZW50WzBdLiRlbCAmJiBhY3RpdmVFbGVtZW50WzBdLiRlbCAhPT0gZWxlbUJlbG93ICYmIGVsZW1CZWxvdy5jbGFzc0xpc3QuY29udGFpbnMoImVsZW1lbnQiKSkgewogICAgICAgIGVsZW1CZWxvdy5jbGFzc0xpc3QuYWRkKCJlbGVtZW50X2luc2VydCIpOwogICAgICAgIGxldCBpZEN1cnJlbnRFbGVtZW50ID0gbnVsbDsKICAgICAgICB0aGlzLmRvY3NFbGVtZW50cy5mb3JFYWNoKGVsZW0gPT4gewogICAgICAgICAgaWYgKGVsZW1CZWxvdyA9PT0gdGhpcy4kcmVmc1tgZWxlbWVudC0ke2VsZW0uaWR9YF1bMF0uJGVsKSB7CiAgICAgICAgICAgIGlkQ3VycmVudEVsZW1lbnQgPSBlbGVtLmlkOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAoaWRDdXJyZW50RWxlbWVudCA9PT0gbnVsbCkgewogICAgICAgICAgdGhpcy5kb2NzQ2F0ZWdvcmllcy5mb3JFYWNoKGNhdGVnb3J5ID0+IHsKICAgICAgICAgICAgaWYgKGNhdGVnb3J5LmVsZW1lbnRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICBjYXRlZ29yeS5lbGVtZW50cy5mb3JFYWNoKGVsZW0gPT4gewogICAgICAgICAgICAgICAgaWYgKHRoaXMuJHJlZnNbYGVsZW1lbnQtJHtlbGVtLmlkfWBdICYmIGVsZW1CZWxvdyA9PT0gdGhpcy4kcmVmc1tgZWxlbWVudC0ke2VsZW0uaWR9YF1bMF0uJGVsKSB7CiAgICAgICAgICAgICAgICAgIGlkQ3VycmVudEVsZW1lbnQgPSBlbGVtLmlkOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHRoaXMucGF5bG9hZEVsZW1lbnRzID0gewogICAgICAgICAgYWN0aXZlOiB0aGlzLmN1cnJlbnREcmFwRWxlbWVudC5pZCwKICAgICAgICAgIGN1cnJlbnQ6IGlkQ3VycmVudEVsZW1lbnQKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoZS5jbGllbnRZID49IGNvbnRhaW5lckNhdGVnb3JpZXMudG9wICYmIGUuY2xpZW50WSA8PSBjb250YWluZXJFbGVtZW50cy50b3AgKyBjb250YWluZXJFbGVtZW50cy5oZWlnaHQpIHRoaXMuJHJlZnMuZHJhZ0VsZW1lbnQuc3R5bGUudG9wID0gZS5jbGllbnRZICsgInB4IjsKICAgICAgdGhpcy4kcmVmcy5kcmFnRWxlbWVudC5zdHlsZS5sZWZ0ID0gIjMwcHgiOwogICAgfSwKCiAgICBkcmFnRW5kRWxlbWVudChlKSB7CiAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAodGhpcy5wYXlsb2FkRWxlbWVudHMgIT09IG51bGwpIHRoaXMuaW5zZXJ0RWxlbWVudHModGhpcy5wYXlsb2FkRWxlbWVudHMpOwogICAgICB0aGlzLiRyZWZzLmRyYWdFbGVtZW50LnN0eWxlLnRvcCA9ICItMTAwdmgiOwogICAgICB0aGlzLmRlbGV0ZUNsYXNzSW5zZXJ0Rm9yRWxlbWVudCgpOwogICAgfSwKCiAgICBkZWxldGVDbGFzc0luc2VydCgpIHsKICAgICAgY29uc3QgY2F0ZWdvcmllcyA9IHRoaXMuJHJlZnMubGlzdENhdGVnb3JpZXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoIi5jYXRlZ29yeSIpOwoKICAgICAgaWYgKGNhdGVnb3JpZXMpIHsKICAgICAgICBjYXRlZ29yaWVzLmZvckVhY2goY2F0ZWdvcnkgPT4gewogICAgICAgICAgaWYgKGNhdGVnb3J5LmNsYXNzTGlzdC5jb250YWlucygiY2F0ZWdvcnlfaW5zZXJ0IikpIGNhdGVnb3J5LmNsYXNzTGlzdC5yZW1vdmUoImNhdGVnb3J5X2luc2VydCIpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIGRlbGV0ZUNsYXNzSW5zZXJ0Rm9yRWxlbWVudCgpIHsKICAgICAgY29uc3QgZWxlbWVudHNDYXRlZ29yaWVzID0gdGhpcy4kcmVmcy5saXN0Q2F0ZWdvcmllcy4kZWwucXVlcnlTZWxlY3RvckFsbCgiLmVsZW1lbnQiKTsKICAgICAgY29uc3QgZWxlbWVudHMgPSB0aGlzLiRyZWZzLmxpc3RFbGVtZW50cy5xdWVyeVNlbGVjdG9yQWxsKCIuZWxlbWVudCIpOwoKICAgICAgaWYgKGVsZW1lbnRzQ2F0ZWdvcmllcykgewogICAgICAgIGVsZW1lbnRzQ2F0ZWdvcmllcy5mb3JFYWNoKGVsZW1lbnQgPT4gewogICAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCJlbGVtZW50X2luc2VydCIpKSBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImVsZW1lbnRfaW5zZXJ0Iik7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChlbGVtZW50cykgewogICAgICAgIGVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7CiAgICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoImVsZW1lbnRfaW5zZXJ0IikpIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgiZWxlbWVudF9pbnNlcnQiKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5jaGFuZ2VmaWx0ZXJDYXRlZ29yaWVzKCk7CiAgICB0aGlzLmNoYW5nZUZpbHRlckVsZW1lbnRzKCk7CiAgfQoKfTs="},{"version":3,"mappings":"AA4EA;AACA;AACA;AACA;AAEA;EACAA;IAAAC;IAAAC;IAAAC;EAAA,CADA;;EAEAC;IACA;MACAC,gBADA;MAEAC,yBAFA;MAGAC,yBAHA;MAIAC,wBAJA;MAKAC,uBALA;MAMAC;IANA;EAQA,CAXA;;EAYAC;IACAN;MACA;MACA;MACA;IACA;;EALA,CAZA;EAmBAO,YACA;EADA,CAnBA;EAsBAC,WACA,iBACA,cADA,EAEA,wBAFA,EAGA,sBAHA,EAIA,gBAJA,EADA;IAOA,iCAPA;;IAQAC;MACA,OACA,qCACAC,sCAFA;IAIA,CAbA;;IAcAC;MACAC;MACAA;MAEA;MAEA;MACA;MACA;MAEA,sBACA,qDADA;MAGA;MACA;;MAEA,IACAC,aACAC,kCADA,IAEAD,wCAHA,EAIA;QACAA;QACA;QAEA;UACA;YACAE;UACA;QACA,CAJA;QAMA;UACAC,mCADA;UAEAC;QAFA;MAIA;;MAEA,IACAL,8BACAA,6CAFA,EAIA;MACA;IACA,CAxDA;;IAyDAM;MACAN;MACAA;MAEA,qCACA;MAEA;MACA;IACA,CAlEA;;IAmEAO;MACAP;MACAA;MAEA,4BACA,qDADA;MAEA;MAEA;MACA;MACA;MAEA;MAEA;MACA;;MAEA,IACAC,aACAC,oBADA,IAEAA,kCAFA,IAGAD,uCAJA,EAKA;QACAA;QACA;QAEA;UACA;YACAE;UACA;QACA,CAJA;;QAMA;UACA;YACA;cACAK;gBACA,IACA,oCACAP,qDAFA,EAGA;kBACAE;gBACA;cACA,CAPA;YAQA;UACA,CAXA;QAYA;;QAEA;UACAC,kCADA;UAEAC;QAFA;MAIA;;MAEA,IACAL,wCACAA,6DAFA,EAIA;MACA;IACA,CA9HA;;IA+HAS;MACAT;MACAA;MAEA,mCACA;MAEA;MACA;IACA,CAxIA;;IAyIAU;MACA,mBACA,2DADA;;MAEA;QACAC;UACA,oDACAH;QACA,CAHA;MAIA;IACA,CAlJA;;IAmJAI;MACA,2BACA,0DADA;MAEA;;MAEA;QACAC;UACA,kDACAC;QACA,CAHA;MAIA;;MACA;QACAC;UACA,kDACAD;QACA,CAHA;MAIA;IACA;;EApKA,CAtBA;;EA4LAE;IACA;IACA;EACA;;AA/LA","names":["components","BaseSearch","DocCategory","DocElement","data","docsSearch","indexCategoryActive","currentDrapCategory","currentDrapElement","payloadCategories","payloadElements","watch","computed","methods","checkCategory","index","dragMoveCategory","e","elemBelow","activeElement","idCurrentElement","active","current","dragEndCategory","dragMoveElement","category","dragEndElement","deleteClassInsert","categories","deleteClassInsertForElement","elementsCategories","element","elements","mounted"],"sourceRoot":"src/views","sources":["Docs.vue"],"sourcesContent":["<template>\n  <div class=\"docs\">\n    <h2 class=\"docs__title\">Документы</h2>\n    <BaseSearch :search.sync=\"docsSearch\" />\n\n    <v-expansion-panels ref=\"listCategories\" accordion class=\"docs__categories\">\n      <TransitionGroup name=\"list\">\n        <v-expansion-panel\n          v-for=\"(category, indexCategory) in docsCategories\"\n          :key=\"category.id\"\n          @click=\"indexCategoryActive = indexCategory\"\n          class=\"docs__category\"\n        >\n          <v-expansion-panel-header\n            v-slot=\"{ open }\"\n            class=\"docs__header\"\n            :class=\"{\n              docs__header_next: checkCategory(indexCategory),\n            }\"\n          >\n            <DocCategory\n              :ref=\"`category-${category.id}`\"\n              :category=\"category\"\n              :open=\"open\"\n              @move=\"dragMoveCategory($event)\"\n              @end=\"dragEndCategory($event)\"\n              @start=\"currentDrapCategory = category\"\n            />\n          </v-expansion-panel-header>\n          <v-expansion-panel-content>\n            <div class=\"docs__elements\">\n              <DocElement\n                v-for=\"element in category.elements\"\n                :key=\"element.id\"\n                :ref=\"`element-${element.id}`\"\n                :element=\"element\"\n                @move=\"dragMoveElement($event)\"\n                @end=\"dragEndElement($event)\"\n                @start=\"currentDrapElement = element\"\n              />\n            </div>\n          </v-expansion-panel-content>\n        </v-expansion-panel>\n      </TransitionGroup>\n    </v-expansion-panels>\n\n    <div ref=\"listElements\" class=\"docs__elements\">\n      <TransitionGroup name=\"list\">\n        <DocElement\n          v-for=\"element in docsElements\"\n          :key=\"element.id\"\n          :ref=\"`element-${element.id}`\"\n          :element=\"element\"\n          @move=\"dragMoveElement($event)\"\n          @end=\"dragEndElement($event)\"\n          @start=\"currentDrapElement = element\"\n        />\n      </TransitionGroup>\n    </div>\n\n    <span\n      v-if=\"docsCategories.length === 0 && docsElements.length === 0\"\n      class=\"docs__error\"\n    >\n      Ничего не найдено. Попробуйте изменить параметры поиска.\n    </span>\n    <div ref=\"dragElement\" class=\"docs__drop\">\n      <DocElement :element=\"currentDrapElement\" :drop=\"true\" />\n    </div>\n    <div ref=\"dragCategory\" class=\"docs__drop\">\n      <DocCategory :category=\"currentDrapCategory\" :drop=\"true\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport BaseSearch from \"@/components/BaseSearch.vue\";\nimport DocCategory from \"@/components/DocCategory.vue\";\nimport DocElement from \"@/components/DocElement.vue\";\nimport { mapGetters, mapMutations, mapActions } from \"vuex\";\n\nexport default {\n  components: { BaseSearch, DocCategory, DocElement },\n  data() {\n    return {\n      docsSearch: null,\n      indexCategoryActive: null,\n      currentDrapCategory: null,\n      currentDrapElement: null,\n      payloadCategories: null,\n      payloadElements: null,\n    };\n  },\n  watch: {\n    docsSearch() {\n      this.changeSearch(this.docsSearch);\n      this.changefilterCategories();\n      this.changeFilterElements();\n    },\n  },\n  computed: {\n    ...mapGetters([\"docsCategories\", \"docsElements\"]),\n  },\n  methods: {\n    ...mapMutations([\n      \"changeSearch\",\n      \"changefilterCategories\",\n      \"changeFilterElements\",\n      \"insertCategory\",\n    ]),\n    ...mapActions([\"insertElements\"]),\n    checkCategory(index) {\n      return (\n        this.indexCategoryActive !== null &&\n        index === this.indexCategoryActive + 1\n      );\n    },\n    dragMoveCategory(e) {\n      e = e || window.event;\n      e.preventDefault();\n\n      const container = this.$refs.listCategories.$el.getBoundingClientRect();\n\n      this.$refs.dragCategory.hidden = true;\n      const elemBelow = document.elementFromPoint(e.clientX, e.clientY);\n      this.$refs.dragCategory.hidden = false;\n\n      const activeElement =\n        this.$refs[`category-${this.currentDrapCategory.id}`];\n\n      this.deleteClassInsert();\n      this.payloadCategories = null;\n\n      if (\n        elemBelow &&\n        activeElement[0].$el !== elemBelow &&\n        elemBelow.classList.contains(\"category\")\n      ) {\n        elemBelow.classList.add(\"category_insert\");\n        let idCurrentElement;\n\n        this.docsCategories.forEach((elem) => {\n          if (elemBelow === this.$refs[`category-${elem.id}`][0].$el) {\n            idCurrentElement = elem.id;\n          }\n        });\n\n        this.payloadCategories = {\n          active: this.currentDrapCategory.id,\n          current: idCurrentElement,\n        };\n      }\n\n      if (\n        e.clientY >= container.top &&\n        e.clientY <= container.top + container.height\n      )\n        this.$refs.dragCategory.style.top = e.clientY + \"px\";\n      this.$refs.dragCategory.style.left = \"30px\";\n    },\n    dragEndCategory(e) {\n      e = e || window.event;\n      e.preventDefault();\n\n      if (this.payloadCategories !== null)\n        this.insertCategory(this.payloadCategories);\n\n      this.$refs.dragCategory.style.top = \"-100vh\";\n      this.deleteClassInsert();\n    },\n    dragMoveElement(e) {\n      e = e || window.event;\n      e.preventDefault();\n\n      const containerCategories =\n        this.$refs.listCategories.$el.getBoundingClientRect();\n      const containerElements = this.$refs.listElements.getBoundingClientRect();\n\n      this.$refs.dragElement.hidden = true;\n      const elemBelow = document.elementFromPoint(e.clientX, e.clientY);\n      this.$refs.dragElement.hidden = false;\n\n      const activeElement = this.$refs[`element-${this.currentDrapElement.id}`];\n\n      this.deleteClassInsertForElement();\n      this.payloadElements = null;\n\n      if (\n        elemBelow &&\n        activeElement[0].$el &&\n        activeElement[0].$el !== elemBelow &&\n        elemBelow.classList.contains(\"element\")\n      ) {\n        elemBelow.classList.add(\"element_insert\");\n        let idCurrentElement = null;\n\n        this.docsElements.forEach((elem) => {\n          if (elemBelow === this.$refs[`element-${elem.id}`][0].$el) {\n            idCurrentElement = elem.id;\n          }\n        });\n\n        if (idCurrentElement === null) {\n          this.docsCategories.forEach((category) => {\n            if (category.elements.length > 0) {\n              category.elements.forEach((elem) => {\n                if (\n                  this.$refs[`element-${elem.id}`] &&\n                  elemBelow === this.$refs[`element-${elem.id}`][0].$el\n                ) {\n                  idCurrentElement = elem.id;\n                }\n              });\n            }\n          });\n        }\n\n        this.payloadElements = {\n          active: this.currentDrapElement.id,\n          current: idCurrentElement,\n        };\n      }\n\n      if (\n        e.clientY >= containerCategories.top &&\n        e.clientY <= containerElements.top + containerElements.height\n      )\n        this.$refs.dragElement.style.top = e.clientY + \"px\";\n      this.$refs.dragElement.style.left = \"30px\";\n    },\n    dragEndElement(e) {\n      e = e || window.event;\n      e.preventDefault();\n\n      if (this.payloadElements !== null)\n        this.insertElements(this.payloadElements);\n\n      this.$refs.dragElement.style.top = \"-100vh\";\n      this.deleteClassInsertForElement();\n    },\n    deleteClassInsert() {\n      const categories =\n        this.$refs.listCategories.$el.querySelectorAll(\".category\");\n      if (categories) {\n        categories.forEach((category) => {\n          if (category.classList.contains(\"category_insert\"))\n            category.classList.remove(\"category_insert\");\n        });\n      }\n    },\n    deleteClassInsertForElement() {\n      const elementsCategories =\n        this.$refs.listCategories.$el.querySelectorAll(\".element\");\n      const elements = this.$refs.listElements.querySelectorAll(\".element\");\n\n      if (elementsCategories) {\n        elementsCategories.forEach((element) => {\n          if (element.classList.contains(\"element_insert\"))\n            element.classList.remove(\"element_insert\");\n        });\n      }\n      if (elements) {\n        elements.forEach((element) => {\n          if (element.classList.contains(\"element_insert\"))\n            element.classList.remove(\"element_insert\");\n        });\n      }\n    },\n  },\n  mounted() {\n    this.changefilterCategories();\n    this.changeFilterElements();\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import url(\"https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,400;0,500;1,400&display=swap\");\n\n.docs {\n  margin: 30px;\n  font-family: \"Fira Sans\", sans-serif;\n\n  &_dragging {\n    opacity: 0.2;\n  }\n\n  &__title {\n    margin-top: 3px;\n    margin-bottom: 15px;\n    font-weight: 500;\n    font-size: 22px;\n    color: black;\n  }\n\n  &__elements {\n    margin-top: 14px;\n  }\n\n  &__categories {\n    margin-top: 18px;\n    border-radius: 0;\n\n    & > *:first-child {\n      border-top-left-radius: 0;\n      border-top-right-radius: 0;\n      width: 100%;\n    }\n  }\n\n  &__header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0;\n    border: 1px solid #dfe4ef;\n  }\n\n  &__category {\n    width: 100%;\n    min-width: 100%;\n\n    &::before {\n      border-radius: 0;\n      box-shadow: none;\n    }\n\n    &:not(:first-child)::after {\n      border-top: none;\n    }\n\n    &:not(:first-child) {\n      .docs__header {\n        border-top: 0;\n\n        &_next {\n          border: 1px solid #dfe4ef;\n        }\n      }\n    }\n\n    .v-expansion-panel-header__icon {\n      display: none;\n    }\n\n    .v-expansion-panel-content__wrap {\n      padding: 0 0 0 16px;\n\n      .element {\n        border-top: 0;\n\n        &:last-child {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    &.v-expansion-panel--active > .v-expansion-panel-header {\n      min-height: auto;\n    }\n\n    &.v-expansion-panel--active + .v-expansion-panel {\n      margin-top: 0;\n    }\n\n    .docs__elements {\n      margin-top: 0;\n    }\n  }\n\n  &__content {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n  }\n\n  &__info {\n    display: flex;\n    align-items: center;\n  }\n\n  &__markers {\n    display: flex;\n    margin-left: 16px;\n  }\n\n  &__marker {\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n\n    &:not(:first-child) {\n      margin-left: 6px;\n    }\n\n    &_outline {\n      border: 1px solid #000000;\n      box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n    }\n  }\n\n  &__type,\n  &__subtitle {\n    margin-left: 15px;\n    font-weight: 400;\n    font-size: 11px;\n  }\n\n  &__type {\n    color: #ff238d;\n  }\n\n  &__subtitle {\n    color: #8e9cbb;\n  }\n\n  &__buttons {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 75px;\n    max-width: 75px;\n    min-width: 75px;\n  }\n\n  &__drop {\n    position: absolute;\n    top: -100vh;\n    z-index: 1;\n    width: calc(100% - 60px);\n    background: white;\n    border: 1px solid #dfe4ef;\n    box-shadow: 0px 3px 16px rgba(0, 102, 255, 0.7);\n\n    .element {\n      border: none;\n    }\n  }\n\n  &__error {\n    color: #8e9cbb;\n  }\n}\n\n.list-enter-active,\n.list-leave-active {\n  transition: all 0.5s ease;\n}\n.list-enter-from,\n.list-leave-to {\n  opacity: 0;\n  transform: translateX(30px);\n}\n</style>\n"]}]}